@page "/EditBooks"
@using Newtonsoft.Json;
@using WebbDesignBlazorLabb3.Shared;

@inject HttpClient client;

<h3>Edit Books</h3>


<table class="table table-striped table-hover">
	<thead>
	<tr>
	  <th scope="col">ISBN</th>
	  <th scope="col">Title</th>
	  <th scope="col">Author</th>
	  <th scope="col">Operations</th>
	</tr>
  </thead>
  <tbody>
	<Virtualize Items="Books" Context="book">
		<tr>
		  <th scope="row">@book.Isbn</th>
		  <th scope="row">@book.Title</th>
		  <th scope="row">@book.Author</th>
		  <div class="btn-group-lg">
			  <button class="btn btn-warning"> Edit </button>
			  <button class="btn btn-outline-danger"> Delete </button>
		  </div>
		</tr>
	</Virtualize>
	</tbody>
</table>

@code {
	List<BookDto> BookList = new();

	public List<BookDto> Books = new List<BookDto> {
			new BookDto(9780434020942, "Angelmaker", "testdesc1", "patric",500, "http://books.google.com/books/content?id=48eD0wx-RR8C&printsec=frontcover&img=1&zoom=1&source=gbs_api"),
			new BookDto(9780593082959, "Losing Eden", "testdesc2", "patric",500, "http://books.google.com/books/content?id=cRCOEAAAQBAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"),
			new BookDto(9780593535158, "The Magic Kingdom", "testdesc3", "patric",500, "http://books.google.com/books/content?id=fJiOEAAAQBAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"),
			new BookDto(9781484278680, "Pro C# 10 with .NET 6", "testdesc4", "patric",500, "http://books.google.com/books/content?id=bVa2zgEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"),
			new BookDto(9781644734780, "Violeta (Spanish Edition)", "testdesc5", "patric",500, "http://books.google.com/books/content?id=nqmQEAAAQBAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"),
			new BookDto(9781893115262, "Visual Basic .NET and the .NET Platform: An Advanced Guide", "testdesc5", "patric",500, "http://books.google.com/books/content?id=4ZNQAAAAMAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"),
			new BookDto(9789175152820, "En mystisk hemmakväll", "testdesc5", "patric",500, "https://via.placeholder.com/128x197.png"),
			new BookDto(9789189015562, "En del har det bra", "testdesc5", "patric",500, "https://via.placeholder.com/128x197.png"),
			new BookDto(9789189603202, "En bra plats i skallen", "testdesc5", "patric",500, "https://via.placeholder.com/128x197.png"),
			new BookDto(9789189632646, "Storpack", "testdesc5", "patric",500, "http://books.google.com/books/content?id=8mmstgAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"),
			new BookDto(9789511414650, "Tuhkaan piirretty maa", "testdesc5", "patric",500, "https://via.placeholder.com/128x197.png"),
			new BookDto(9781484278680, "Pro C# 10 with .NET 6", "testdesc4", "patric",500, "http://books.google.com/books/content?id=bVa2zgEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api")
			};

	protected override async Task OnInitializedAsync()
	{
		await GetAllBooks();
	}

	private async Task GetAllBooks()
	{
		BookList = (await client.GetFromJsonAsync<IEnumerable<BookDto>>("book/getAll")).ToList();

	}
}
